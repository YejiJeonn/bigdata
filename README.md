<img width="960" height="418" alt="image" src="https://github.com/user-attachments/assets/423bf339-75dc-40ed-8fdc-5dd3c71a575e" /><img width="960" height="432" alt="image" src="https://github.com/user-attachments/assets/c4ea3e06-f7c6-47b0-8953-fb3e9aedc189" /># bigdata
[빅데이터] 수업용📊

### 주제 : 주가에 영향을 끼치는 금융상품 탐색 / 주식과 금융상품 간의 연관성 / 그래프 시각화 & 분석 예측
---
이 레포지토리는 빅데이터 수업의 최종 과제 제출을 위해 생성되었습니다. </br>
최근 주식에 관심이 생겨, 다양한 금융상품에 따라 주식의 변동성이 어떤 영향을 받는지 조사하는 것을 주제로 선정하게 되었습니다. </br>
다양한 금융상품과 주식 간의 변동성 비교 그래프를 통해 어떤 금융상품에 어떠한 영향을 받는지에 대해 그래프로 시각화를 하고 분석하여 최종적으로 **금융상품에서 오는 영향으로 인한 주식의 변동성을 예측**하고자 했습니다.
---

진행한 시각화와 분석은 다음과 같습니다. </br></br>
[1. 시각화] </br>
1-1. 국내 주식 분야별 비교 그래프 </br>
1-2. 한국장 vs. 미국장 주가 비교 그래프 </br>
1-3. 금 vs. 코인 vs. 주가 비교 그래프 </br>
1-4. 환율(미국 $) vs. 주가 비교 그래프 </br>

[2. 분석/예측] </br>
2-1. KOSPI & KOSDAQ 주가 예측 </br>
2-2. 환율 기반 주가 예측 </br>
2-3. 금, 코인, 주식 상관관계 및 연관성을 통한 예측 </br>
2-4. 미국장 변화에 따른 한국장 변화 예측 </br>
</br></br>
다음은 진행한 주제별 구체적인 설명입니다. </br>
</br>
============================================================================================
</br></br>
1. 시각화 분석
</br></br>
1.1. 국내 주식 분야별 비교 그래프
<img width="862" height="428" alt="image" src="https://github.com/user-attachments/assets/7c837496-8762-4b52-bb7a-8d05fd82494c" /> </br>
<img width="862" height="428" alt="image" src="https://github.com/user-attachments/assets/4339f570-ce53-4f8c-84ec-e98b1f571c21" /> </br>
<img width="960" height="432" alt="image" src="https://github.com/user-attachments/assets/3a9c4e88-6014-4d60-96e6-b40079671ba2" /> </br>
<img width="960" height="418" alt="image" src="https://github.com/user-attachments/assets/99f4b70a-1958-4c46-861a-71f6e547fa2b" /> </br>
<img width="960" height="418" alt="image" src="https://github.com/user-attachments/assets/0ed9bd99-f7de-4c1d-bece-17780bfafb43" /> </br>
</br> </br>
📌 ① 데이터 정보
  출처: 한국경제 데이터센터 웹 크롤링
  수집 항목
    - 분야(업종), 종목명
    - 현재가
    - 등락률
  특징
    - 시계열이 아닌 단일 시점 데이터
    - 분야별 상대 비교 목적
📌 ② 전처리 과정
  한글 폰트 설정(나눔고딕)
  웹 크롤링 & HTML 파싱
  문자열 후처리(%, +, , 제거 후 숫자 변환)
  결측 제거 후 분야별 groupby 집계
📌 ③ 사용된 그래프
  막대 그래프: 분야별 평균 현재가 / 평균 등락률
  레이더 차트: 분야 간 패턴·치우침 확인
  트리맵: 분야 규모의 상대적 크기 시각화
  버블 차트
    X축: 평균 등락률
    Y축: 평균 현재가
    버블 크기: 평균값 반영
    버블 투명도: 값 크기 비례
📌 ④ 주요 해석
  단순 수치 비교 → 막대그래프
  패턴 확인 → 레이더 차트
  상대 규모 파악 → 트리맵
  평균가격+변동률 동시에 비교 → 버블 차트
</br> </br>
1.2. 한국장 vs 미국장 비교 그래프
<img width="733" height="404" alt="image" src="https://github.com/user-attachments/assets/5c160e31-bcf8-4a84-9bc0-dcc37ce9eece" /> </br>
</br> </br>
📌 ① 데이터 정보
  출처: Stooq (KOSPI · S&P500 월별 종가)
  특징
    - 시계열 구조
    - 정규화 필요(두 지수의 절대값이 달라 의미 없음)
📌 ② 전처리
  날짜 파싱
    - 2019년 이후 데이터 사용
  첫 값을 100으로 정규화
  월별 수익률 계산
  두 시장 간 상관계수 계산
📌 ③ 그래프
  선 그래프(정규화 기반)
  방향성·추세 비교에 적합
📌 ④ 인사이트
  상관계수 0.7086 → 강한 양의 상관관계
  한국장은 미국장을 따라가는 구조

1.3. 금 vs 코인 vs 주가 비교
📌 ① 데이터 정보
  GLD ETF(금)
  BTC-USD(비트코인)
  KOSPI 지수
  기간: 2019–2025
📌 ② 전처리
  yfinance로 수집
  결측 제거
  일간 수익률 계산
  시작값 100으로 정규화
📌 ③ 그래프
  Heatmap: 자산 간 상관관계
  정규화 선 그래프: 변동성 비교
📌 ④ 주요 인사이트
  비트코인은 다른 자산과 상관성이 낮음
  금 = 안정적, Bitcoin = 고변동
  KOSPI는 중간 변동성
  금융 이벤트별 자산군 반응 차이를 확인 가능

1.4. 환율 vs KOSPI 비교
📌 ① 데이터 정보
  USD/KRW 환율
  KOSPI 종가
  2019–2025 일 단위 데이터
📌 ② 전처리
  날짜 기준 병합
  수익률 계산
📌 ③ 그래프
  정규화 비교 그래프
  상관계수 계산
📌 ④ 인사이트
  일반적으로 환율 ↑ → KOSPI ↓
  외환시장과 주식시장은 종종 역상관
  경제 이벤트(코로나, 금리 등) 반응 차이 확인 가능

2. 예측 모델 분석

2.1. KOSPI & KOSDAQ 예측
📌 ① 데이터 정보
  FinanceDataReader(FDR)
  KOSPI, KOSDAQ 일별 종가
  2019–2025
📌 ② 전처리
  정규화(첫날 = 100)
  월별 수익률 계산
  LSTM용 60일 윈도우 시퀀스 생성
📌 ③ 그래프
  정규화 추세 비교
  상관계수 분석
  LSTM 실제값 vs 예측값 오버레이
📌 ④ 인사이트
  KOSPI & KOSDAQ → 매우 높은 상관성
  KOSDAQ은 더 큰 변동성
  LSTM은 KOSPI에서 안정적 예측 성능

2.2. 환율 기반 KOSPI 예측
📌 ① 데이터 정보
  2000–2025 KOSPI 종가
  단일 시계열 → 비정상성 강함
📌 ② 전처리
  ARIMA 차분
  LSTM 정규화 및 시퀀스 구성
  Prophet용 컬럼명 변환
📌 ③ 모델별 분석
  ARIMA
    - 단순 추세 기반
    - 급등락 예측 실패
  LSTM
    - 실제 움직임과 가장 유사
    - 단기 패턴 재현 우수
  Prophet
    - 장기 추세는 잘 잡으나 단기 변동 반영 약함
📌 ④ 결론
  LSTM > Prophet > ARIMA
  장기 데이터의 “방향성” 파악에는 의미 있음

2.3. 금·코인·주식 상관 기반 예측
📌 ① 데이터 정보
  Gold, BTC, KOSPI 종가
  선형회귀 / ARIMA / ARIMAX / LSTM 비교
📌 ② 전처리
  결측치 처리: 날짜 병합 후 dropna
  수익률 계산
  LSTM용 MinMaxScaler 적용
📌 ③ 모델 분석
  선형회귀: 단순 관계 분석, 설명력 낮음
  ARIMA: 전환점 포착 불가
  ARIMAX: 외생변수(금, BTC) 반영
  LSTM: 패턴 재현력 최고
📌 ④ 결과
  LSTM이 가장 실제 종가와 비슷한 예측 생성
  장기 예측은 오차 누적 가능

2.4. 미국장(SPX) 기반 한국장(KOSPI) 예측
📌 ① 데이터 정보
  SPX, KOSPI 월별 수익률
  공통 날짜 병합
📌 ② 전처리
  Train: 2019–2023
  Test: 2024–
  LSTM: 지난 12개월 SPX 입력 → 다음달 KOSPI 예측
📌 ③ 모델 비교
  Linear Regression
  VAR
  LSTM: 가장 실제 움직임과 유사
📌 ④ 주요 결론
  미국장이 한국장을 예측하는 데 유효
  LSTM이 가장 높은 설명력

============================================================================================

🔥 최종 결론
  1) 한국장은 미국 시장 영향력이 가장 크다
    - S&P500 ↔ KOSPI 상관계수 약 0.7
    - 한국 증시는 구조적으로 미국장에 연동
  2) 환율은 KOSPI와 음(-)의 관계
    - 달러 강세 → KOSPI 하락 가능성 증가
    - 한국 증시는 환율 민감형 시장
  3) 금·비트코인은 KOSPI와 낮은 상관성
    - KOSPI 예측시 중요 변수는 아님
    - 그러나 분산 투자에서는 의미 있음
  4) 예측 모델 정확도 순위
    - LSTM > VAR > ARIMA / Prophet
  5) 금융 시계열은 비선형적
    - 완벽한 수치 예측은 불가능
    - “방향성 예측”이 현실적 목표
